<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/sstur/nodeftpd#readme">ftpd (v0.2.15)</a>
</h1>
<h4>Node FTP Server</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.ftpd">module ftpd</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer">
            function <span class="apidocSignatureSpan">ftpd.</span>FtpServer
            <span class="apidocSignatureSpan">(host, options)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ftpd.</span>FtpServer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ftpd.</span>glob</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">ftpd.</span>starttls</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ftpd.FtpServer">module ftpd.FtpServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.FtpServer">
            function <span class="apidocSignatureSpan">ftpd.</span>FtpServer
            <span class="apidocSignatureSpan">(host, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.super_">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ftpd.FtpServer.prototype">module ftpd.FtpServer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.prototype._logIf">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_logIf
            <span class="apidocSignatureSpan">(level, message, conn, isError)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.prototype._onConnection">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_onConnection
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.prototype._traceIf">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_traceIf
            <span class="apidocSignatureSpan">(level, message, conn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.prototype.close">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.FtpServer.prototype.listen">
            function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>listen
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ftpd.glob">module ftpd.glob</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.glob.glob">
            function <span class="apidocSignatureSpan">ftpd.</span>glob
            <span class="apidocSignatureSpan">(path, fsm, callback, noWildcards)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.glob.matchPattern">
            function <span class="apidocSignatureSpan">ftpd.glob.</span>matchPattern
            <span class="apidocSignatureSpan">(pattern, string)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.glob.setMaxStatsAtOnce">
            function <span class="apidocSignatureSpan">ftpd.glob.</span>setMaxStatsAtOnce
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.ftpd.starttls">module ftpd.starttls</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.starttls.starttlsClient">
            function <span class="apidocSignatureSpan">ftpd.starttls.</span>starttlsClient
            <span class="apidocSignatureSpan">(socket, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.ftpd.starttls.starttlsServer">
            function <span class="apidocSignatureSpan">ftpd.starttls.</span>starttlsServer
            <span class="apidocSignatureSpan">(socket, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">ftpd.starttls.</span>RECOMMENDED_CIPHERS</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ftpd" id="apidoc.module.ftpd">module ftpd</a></h1>


    <h2>
        <a href="#apidoc.element.ftpd.FtpServer" id="apidoc.element.ftpd.FtpServer">
        function <span class="apidocSignatureSpan">ftpd.</span>FtpServer
        <span class="apidocSignatureSpan">(host, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FtpServer(host, options) {
  var self = this;
  events.EventEmitter.call(self);

  self.host = host;

  self.options = options;

  if (!self.options.maxStatsAtOnce)
    self.options.maxStatsAtOnce = 5;

  if (!options.getInitialCwd)
    throw new Error("'getInitialCwd' option of FtpServer must be set");
  if (!options.getRoot)
    throw new Error("'getRoot' option of FtpServer must be set");
  self.getInitialCwd = options.getInitialCwd;
  self.getRoot = options.getRoot;

  self.getUsernameFromUid = options.getUsernameFromUid || function(uid, c) {
    c(null, "ftp");
  };
  self.getGroupFromGid = options.getGroupFromGid || function(gid, c) {
    c(null, "ftp");
  };
  self.debugging = options.logLevel || 0;
  self.useWriteFile = options.useWriteFile;
  self.useReadFile = options.useReadFile;
  self.uploadMaxSlurpSize = options.uploadMaxSlurpSize || 0;

  self.server = net.createServer();
  self.server.on('connection', function(socket) {
    self._onConnection(socket);
  });
  self.server.on('error', function(err) {
    self.emit('error', err);
  });
  self.server.on('close', function() {
    self.emit('close');
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
console.log();
console.log('*** To run as FTPS server,                 ***');
console.log('***  set "KEY_FILE", "CERT_FILE"           ***');
console.log('***  and (optionally) "CA_FILES" env vars. ***');
console.log();
}

server = new ftpd.<span class="apidocCodeKeywordSpan">FtpServer</span>(options.host, {
getInitialCwd: function () {
  return '/';
},
getRoot: function () {
  return process.cwd();
},
pasvPortRangeStart: 1025,
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ftpd.FtpServer" id="apidoc.module.ftpd.FtpServer">module ftpd.FtpServer</a></h1>


    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.FtpServer" id="apidoc.element.ftpd.FtpServer.FtpServer">
        function <span class="apidocSignatureSpan">ftpd.</span>FtpServer
        <span class="apidocSignatureSpan">(host, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function FtpServer(host, options) {
  var self = this;
  events.EventEmitter.call(self);

  self.host = host;

  self.options = options;

  if (!self.options.maxStatsAtOnce)
    self.options.maxStatsAtOnce = 5;

  if (!options.getInitialCwd)
    throw new Error("'getInitialCwd' option of FtpServer must be set");
  if (!options.getRoot)
    throw new Error("'getRoot' option of FtpServer must be set");
  self.getInitialCwd = options.getInitialCwd;
  self.getRoot = options.getRoot;

  self.getUsernameFromUid = options.getUsernameFromUid || function(uid, c) {
    c(null, "ftp");
  };
  self.getGroupFromGid = options.getGroupFromGid || function(gid, c) {
    c(null, "ftp");
  };
  self.debugging = options.logLevel || 0;
  self.useWriteFile = options.useWriteFile;
  self.useReadFile = options.useReadFile;
  self.uploadMaxSlurpSize = options.uploadMaxSlurpSize || 0;

  self.server = net.createServer();
  self.server.on('connection', function(socket) {
    self._onConnection(socket);
  });
  self.server.on('error', function(err) {
    self.emit('error', err);
  });
  self.server.on('close', function() {
    self.emit('close');
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
console.log();
console.log('*** To run as FTPS server,                 ***');
console.log('***  set "KEY_FILE", "CERT_FILE"           ***');
console.log('***  and (optionally) "CA_FILES" env vars. ***');
console.log();
}

server = new ftpd.<span class="apidocCodeKeywordSpan">FtpServer</span>(options.host, {
getInitialCwd: function () {
  return '/';
},
getRoot: function () {
  return process.cwd();
},
pasvPortRangeStart: 1025,
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.super_" id="apidoc.element.ftpd.FtpServer.super_">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ftpd.FtpServer.prototype" id="apidoc.module.ftpd.FtpServer.prototype">module ftpd.FtpServer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.prototype._logIf" id="apidoc.element.ftpd.FtpServer.prototype._logIf">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_logIf
        <span class="apidocSignatureSpan">(level, message, conn, isError)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_logIf = function (level, message, conn, isError) {
  if (this.debugging &gt;= level) {
    if (conn)
      console.log((conn &amp; conn.socket ? conn.socket.remoteAddress + ": " : "") + message);
    else
      console.log(message);

    if (isError) {
      console.trace("Trace follows");
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.prototype._onConnection" id="apidoc.element.ftpd.FtpServer.prototype._onConnection">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_onConnection
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_onConnection = function (socket) {
  var conn = new FtpConnection({
    server: this,
    socket: socket,
    pasv: null, // passive listener server
    dataPort: 20,
    dataHost: null,
    dataListener: null, // for incoming passive connections
    dataSocket: null, // the actual data socket
    // True if the client has sent a PORT/PASV command, and
    // we haven't experienced a problem with the configuration
    // it specified. (This can therefore be true even if there
    // is not currently an open data connection.)
    dataConfigured: false,
    mode: "ascii",
    filefrom: "",
    username: null,
    filename: "",
    fs: null,
    cwd: null,
    root: null,
    hasQuit: false,

    // State for handling TLS upgrades.
    secure: false,
    pbszReceived: false
  });

  this.emit("client:connected", conn); // pass client info so they can listen for client-specific events

  socket.setTimeout(0);
  socket.setNoDelay();

  this._logIf(1, "Connection");
  conn.respond("220 FTP server (nodeftpd) ready");

  socket.on('data', function(buf) {
    conn._onData(buf);
  });
  socket.on('end', function() {
    conn._onEnd();
  });
  socket.on('close', function() {
    conn._onClose();
  });
  socket.on('error', function(err) {
    conn._onError(err);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.prototype._traceIf" id="apidoc.element.ftpd.FtpServer.prototype._traceIf">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>_traceIf
        <span class="apidocSignatureSpan">(level, message, conn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_traceIf = function (level, message, conn) {
  return this._logIf(level, message, conn, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.prototype.close" id="apidoc.element.ftpd.FtpServer.prototype.close">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  return this.server[fname].apply(this.server, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.FtpServer.prototype.listen" id="apidoc.element.ftpd.FtpServer.prototype.listen">
        function <span class="apidocSignatureSpan">ftpd.FtpServer.prototype.</span>listen
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function () {
  return this.server[fname].apply(this.server, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    } else {
      failure();
    }
  });
});

server.debugging = 4;
server.<span class="apidocCodeKeywordSpan">listen</span>(options.port);
console.log('Listening on port ' + options.port);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ftpd.glob" id="apidoc.module.ftpd.glob">module ftpd.glob</a></h1>


    <h2>
        <a href="#apidoc.element.ftpd.glob.glob" id="apidoc.element.ftpd.glob.glob">
        function <span class="apidocSignatureSpan">ftpd.</span>glob
        <span class="apidocSignatureSpan">(path, fsm, callback, noWildcards)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function glob(path, fsm, callback, noWildcards) {
  var s = path.indexOf('*');
  var q = path.indexOf('?');
  var w;
  for (w = 0; !noWildcards &amp;&amp; w &lt; path.length &amp;&amp; path.charAt(w) != '*' &amp;&amp; path.charAt(w) != '?'; ++w);

  if (w == path.length) { // There are no wildcards.
    fsm.readdir(path, function(err, contents) {
      if (err) {
        if (err.errno == constants.ENOTDIR) {
          statList(fsm, [path], function(err, list) {
            if (err)
              return callback(err);
            if (list.length != 1)
              throw new Error("Internal error in glob.js");
            callback(null, list);
          });
        }
        else if (err.errno == constants.ENOENT) {
          callback(null, []);
        }
        else {
          callback(err);
        }
      }
      else {
        statList(fsm, contents.map(function(p) {
          return PathModule.join(path, p);
        }), function(err, list) {
          if (err)
            callback(err);
          else
            callback(null, list);
        });
      }
    });

    return;
  }
  else {
    // Check that there is no '/' after the first wildcard.

    var i;
    for (i = w; i &lt; path.length; ++i) {
      if (path.charAt(i) == '/')
        return callback(null, []);
    }

    var base = "", pattern;
    for (i = w; i &gt;= 0; --i) {
      if (path.charAt(i) == '/') {
        base = path.substr(0, i + 1)
        break;
      }
    }
    pattern = path.substr(i == 0 ? 0 : i + 1);

    // Remove any leading/trailing slashes which might still
    // be present if the path contains multiple slashes.
    for (i = 0; i &lt; pattern.length &amp;&amp; pattern.charAt(i) == '/'; ++i);
    if (i &gt; 0)
      pattern = pattern.substr(i);
    for (i = base.length - 1; i &gt; 0 &amp;&amp; base.charAt(i) == '/'; --i);
    if (i != base.length - 1)
      base = base.substr(0, i + 1);

    // We now have the base path in 'base' (possibly the empty string)
    // and the wildcard filename pattern in 'pattern'.

    readTheDir(false);
    function readTheDir(listingSingleDir) {
      fsm.readdir(base, function(err, contents) {
        if (err) {
          if (err.errno == constants.ENOTDIR || err.errno == constants.ENOENT) {
            callback(null, []);
          }
          else {
            callback(err);
          }
        }
        else {
          var matches;
          if (!listingSingleDir)
            matches = contents.filter(function(n) {
              return matchPattern(pattern, n);
            });
          else
            matches = contents;

          // Special case. If we have exactly one match, and it's a directory, then list
          // the contents of that directory. (There's no reason why anyone should want
          // to identify mutliple directories using wildcards and then list all of their
          // contents over FTP!)
          if (!listingSingleDir &amp;&amp; matches.length == 1) {
            var dir = PathModule.join(base, matches[0]);
            fsm.stat(dir, function(err, st) {
              if (err)
                return callback(err);

              if (!st.isDirectory()) {
                doTheNormalThing();
              }
              else {
                base = dir;
                readTheDir(/*listingSingleDir=*/true);
              }
            });
          }
          else {
            doTheNormalThing();
          }

          function doTheNormalThing() {
            statList(fsm, matches.map(function(p) {
              return PathModule.join(base, p);
            }), function(err, list) {
              if (err)
                callback(err);
              else
                callback(null, list);
            });
          }
        }
      });
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.glob.matchPattern" id="apidoc.element.ftpd.glob.matchPattern">
        function <span class="apidocSignatureSpan">ftpd.glob.</span>matchPattern
        <span class="apidocSignatureSpan">(pattern, string)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function matchPattern(pattern, string) {
  var pi = 0, si = 0;
  for (; si &lt; string.length &amp;&amp; pi &lt; pattern.length; ++si) {
    var c = string.charAt(si);
    var pc = pattern.charAt(pi);

    if (pc == '*') {
      if (pi + 1 == pattern.length) {
        ;
      }
      else if (pattern.charAt(pi + 1) == '*') {
        --si;
        ++pi;
      }
      else if (pattern.charAt(pi + 1) == '?') {
        ++pi;
      }
      else if (si &lt; string.length - 1 &amp;&amp; pattern.charAt(pi + 1) == string.charAt(si)) {
        pi += 2;
      }
    }
    else if (pc == '?') {
      ++pi;
    }
    else if (pc == c) {
      ++pi;
    }
    else {
      return false;
    }
  }

  return (pi == pattern.length || (pi == pattern.length - 1 &amp;&amp; pattern.charAt(pi) == '*')) &amp;&amp;
      si == string.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.glob.setMaxStatsAtOnce" id="apidoc.element.ftpd.glob.setMaxStatsAtOnce">
        function <span class="apidocSignatureSpan">ftpd.glob.</span>setMaxStatsAtOnce
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setMaxStatsAtOnce(n) {
  CONC = n;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.ftpd.starttls" id="apidoc.module.ftpd.starttls">module ftpd.starttls</a></h1>


    <h2>
        <a href="#apidoc.element.ftpd.starttls.starttlsClient" id="apidoc.element.ftpd.starttls.starttlsClient">
        function <span class="apidocSignatureSpan">ftpd.starttls.</span>starttlsClient
        <span class="apidocSignatureSpan">(socket, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function starttlsClient(socket, options, callback) {
  return starttls(socket, options, callback, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.ftpd.starttls.starttlsServer" id="apidoc.element.ftpd.starttls.starttlsServer">
        function <span class="apidocSignatureSpan">ftpd.starttls.</span>starttlsServer
        <span class="apidocSignatureSpan">(socket, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function starttlsServer(socket, options, callback) {
  return starttls(socket, options, callback, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>